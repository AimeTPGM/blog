---
layout: post 
series: Others
topic:  หั่นโค้ดยังไง ไม่ให้อ้วก
subtitle: "Better way to serve the code"
description: "basic html และ jvavascript สำหรับส่งอีเมลล์จาก html form ไปหา email ใน portfolio หรือเว็บไซต์ของตัวเอง"
createdDate: 2019-05-12 06:20 +0700
lastModifiedDate: 2019-05-12 06:55 +0700
categories: web
tags: [coding journey, code refactor]
---
{% include hidden-thumbnail.html image="/blog/assets/img/2019/05/12/journey/thumbnail.png" %}

บล็อกนี้ขอเริ่มต้นด้วยคำถามสักข้อนึงก่อน 

{% include focus-text-lvl1.html content="สงสัยไหม ทำไมต้องหั่นโค้ด?" %} 

เคยไหม ที่จะต้องอ่านโค้ดหน้านึงยาวเป็นหลักร้อยบรรทัด?

แล้วแฮปปี้ไหม กับการอ่านโค้ดแบบนั้น?

ถ้าคำตอบในใจคือไม่แฮปปี้ ... วันนี้คุณเปิดมาถูกบล็อกแล้ว

----

การหั่นโค้ดออกมาเป็นชิ้นย่อยๆเล็กๆ ให้ต่างโค้ดต่างทำงานตามหน้าที่ของมัน เพื่อให้ดูแลโค้ดได้ง่ายขึ้น แก้ง่ายขึ้น เพิ่มง่ายขึ้นนั้น วงการโปรแกรมมิ่ง มีชื่อเล่นให้มันว่า {% include focus-text.html content="Separation of Concerns" %}

ซึ่งนิยามนี้มันเกิดมาเพื่อยกระดับ maintainability ของโค้ด เป็นผลดีกับเดฟ ที่ไม่ต้องมานั่งหงุดหงิด เวลานั่งทำงานหรือแก้บั้ค แล้วจะต้องวิ่งไล่โค้ดที่ยาวเป็นร้อยๆบรรทัด ซึ่งทำให้มันอ่านยาก เดฟควรลองคิดดู ว่ามีอะไรที่เราสามารถหั่นมันแยกออกไปได้รึเปล่า ถ้ามีจุดที่ทำได้ ก็ควรทำ 

เพราะการหั่นโค้ดออกไปย่อยๆ จนมันเล็กพอที่จะอ่านและทำความเข้าใจได้ง่าย จะทำให้ชีวิตเดฟมีความสุขขึ้น ไม่ว่าจะเป็นโปรเจ็คทำคนเดียว หรือโปรเจ็คแบบทีมก็ตาม

{% include focus-text-lvl1.html content="แต่การหั่นโค้ด ก็ไม่ใช่สักแต่หั่น" %} 

เพราะถ้าเราหั่นซอยยิบย่อยจนเกินไป การพยายามแยกทุกอย่างออกจากกัน อาจจะทำให้ยิ่งทำงานยากขึ้นไปอีก 

แล้วเมื่อไหร่ถึงจะรู้ว่าเราหั่นโค้ด<u>ยิบย่อยจนเกินไป</u>?

เอาง่ายๆ ... ก็ถ้าต้องแก้โค้ดจากไฟล์นึง แล้วต้องไปเปิดอีกไฟล์นึง แล้วไปเปิดเพิ่มอีกไฟล์นึง แล้ววนกลับมาไฟล์นึง ก่อนที่จะไปเปิดเพิ่มขึ้นมาอีกไฟล์นึง วิ่งไล่ไปจนถึงโค้ดในอีกไฟล์นึง เพื่อที่จะเข้าใจโค้ดแค่ก้อนเดียว 

แบบเนี้ย ... หั่นโค้ดเยอะไป <b>เยอะจนจนมานั่งเสียเวลาทำความเข้าใจโค้ดทีหลัง</b> แถมยากกว่าการที่มันอยู่ไฟล์เดียวกันซะอีก

ก่อนจะหั่นโค้ด ชั่งน้ำหนักดีๆ ด้วยคำถามง่ายๆ 3 ข้อ
- หั่นโค้ดส่วนนั้นออกไป แล้วชีวิตง่ายขึ้นไหม ช่วยประหยัดเวลาในการทำความเข้าใจโค้ดรึเปล่า ทั้งตัวเรา ทั้งคนในทีม
- การเพิ่มโค้ด ลบโค้ด หรือแก้ไขโค้ดใดๆ หลังจากหั่นโค้ด ทำแล้วยังมีความสุขดีอยู่รึเปล่า หรือต้องมานั่งระแวงว่าเพิ่ม ลด แก้จะทำให้โค้ดที่ไหนสักที่พัง
- ถ้าเกิดบั้คในหน้าที่เราจะหั่นหรือหั่นออกไป การหั่นจะช่วยทำให้หาบั้คง่ายรึเปล่า (รู้เลยว่าอยู่ไฟล์ไหน ถ้ารับค่าจากที่อื่นมา รับมาจากไหน ด้วยตัวแปรอะไร แล้วเอาไปโชว์ที่ไหน)

ถ้าคำตอบเป็น positive ทั้ง 3 ข้อ ก็มีเปอร์เซ็นสูงที่การตัดสินใจหั่นโค้ดครั้งนี้ <u>อาจจะ</u>เป็นเรื่องที่ถูกต้อง ก็ลองหั่นโค้ดดู

เพราะถึงจะตอบเป็น positive ทั้ง 3 ข้อ แต่พอถึงจุดนึง โค้ดที่เคยหั่นออกมา อาจจะถูกแก้จนกลายเป็นโค้ดที่ยุ่งยากในภายหลังได้เหมือนกัน

{% include focus-text.html content="แต่ถ้าคำตอบเป็น negative แม้แต่หนึ่งข้อ" %} ลองคิดใหม่อีกที บางทีแค่การหั่นโค้ดอาจจะไม่ใช่คำตอบ

-----

การหั่นโค้ดอาจจะช่วยทำให้ดูแลโค้ดได้ง่ายขึ้นบ้างก็จริง แต่ ...

{% include focus-text-lvl1.html content="Good smell is good. Bad smell is bad." %} 

{% include focus-text.html content="ถ้าโค้ดมันเหม็นตุๆอยู่แล้ว การหั่นโค้ดอาจจะยิ่งเหมือนเปลี่ยนจากขยะชิ้นให้เป็นขยะมูลฝอย" %} กลิ่นตุๆก็ยังคงอยู่ ลอยคลุ้งไปมา แถมจัดการยากกว่าเดิม

{% include focus-text.html content="แต่ถ้าโค้ดกลิ่นหอมเหมือนสเต็กชั้นดี การแบ่งชิ้นในขนาดที่พอเหมาะ ก็เหมือนกับการเสิร์ฟสเต็กลงบนจานพร้อมเสิร์ฟในร้านอาหารชั้นเยี่ยม" %}

ดังนั้น ก่อนจะหั่นโค้ดออกไป อย่าลืมดู {% include focus-text.html content="โค้ดที่มีอยู่ เรียกว่า สเต็กชั้นดีได้รึยัง" %}

ถ้ายัง เราควรปรุงให้มันเป็นเนื้อสเต็กรสเลิศ ก่อนที่จะเริ่มหั่นเพื่อเสิร์ฟต่อไป

ถ้ายิ่งหั่น แล้วโค้ดยิ่งเน่า ไม่ต้องถึงคนอื่นที่มาอ่านโค้ดหรอก ตัวเราเองยังอาจจะกินไม่ลง เผลอๆเขียนใหม่ยังง่ายกว่ามานั่งอ่านโค้ดเดิมของตัวเอง

ดังนั้น มีสติทุกครั้งเวลาเขียนโค้ด มีสติทุกครั้งก่อนหั่นโค้ด

ท่อง 3 คาถานี้ไว้ในใจเสมอเมื่อจับคีย์บอร์ด

{% include focus-text-lvl1.html content="Separation of Concerns," %}

{% include focus-text-lvl1.html content="Don't Repeat Yourself," %}

{% include focus-text-lvl1.html content="Keep it simple and stupid" %}

ที่เหลือคือ ฝึก ฝึก ฝึก 

วันนึงเราจะเริ่มเขียนโค้ดและหั่นโค้ดได้หอมและอร่อยขึ้นแน่นอน

{% include signature.html %}